<!doctype html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
	
	<a href='javascript:let a={subscribers:{},on:function(b,c){let d=b||"default";this.subscribers[d]||(this.subscribers[d]=[]),this.subscribers[d].push(c)},off:function(b,c){this.subscribers[b]?this.subscribers[b]=this.subscribers[b].filter(function(a){return c!==a}):console.error(b+" not found!")},trigger:function(b,c=null){let d=this.subscribers[b];if(d)for(let a=0,b=d.length;a<b;a++)d[a](c);else console.log("EE.trigger: not found subscribers for "+b+" event")}};const b=[2,3,4,10],c=6,d=0,e=3,f=10,g=[6,7,8,12,13,14,15,16,19,20,21,22,23,27,28,29,35],h=[26,30,34,36,42],i=[6,8,12,16],j=353,k="http://forjob.esy.es/",l=364,m=370,n=119,o=97,p=100,q=[7,14,21,63,98,126,140,147,154,189,196,203,224,252,266,273,280,294,301,308,8,57,71,99,106,120,127,141,183,211,225,253,267,295,316,9,58,72,100,114,128,142,184,212,226,254,268,296,317,10,24,31,52,80,101,129,143,150,157,185,213,227,255,269,276,283,297,304,311,11,32,53,60,67,74,81,102,130,144,186,214,228,256,270,298,305,12,33,47,89,103,131,145,187,215,236,250,271,299,313,13,20,27,34,48,90,104,132,146,153,160,195,202,209,244,272,279,286,300,321,335,349,363],r=[14,42,63,70,77,98,126,161,182,203,217,224,231,238,245,259,301,322,336,350,15,43,57,85,99,127,162,183,204,232,260,267,302,323,337,351,23,37,58,86,100,128,163,184,205,233,261,275,303,324,338,352,31,59,87,101,129,164,185,206,234,262,283,304,325,339,353,32,60,88,102,130,165,186,207,235,263,291,305,326,340,354,33,61,89,110,124,131,173,187,201,236,264,299,306,34,69,76,83,118,132,139,181,195,223,230,237,244,251,265,307,328,342,356];class s{constructor(b){this.dataField=b.dataField,this._centerShip=e,this._gun=f,this._died=!1,this.currentPositionShip=[],this.nextPositionShip=[],this.timeDelay=this._throttle(this._shot.bind(this),400),a.on("start game",()=>this.initShip()),a.on("stop game",()=>this._died=!0),document.addEventListener("keypress",this.checkMove.bind(this))}initShip(){this._centerShip=e,this._gun=f,this._died=!1,this.currentPositionShip=[],this.nextPositionShip=[],this._initBody()}_initBody(){b.forEach(a=>{let b=this.dataField[a];b.el.style.fill="#00f",b.isShip=!0,this.currentPositionShip.push(b)})}_throttle(a,b){let c=!1,d=null,e=null;return function f(){if(!this._died){if(c)return d=arguments,void(e=this);c=!0,a.call(this),setTimeout(()=>{c=!1,d&&(f.call(e),e=null,d=null)},b)}}}checkMove(a){if(!this._died){a.preventDefault();let b=a.keyCode;if(b===n||b===o||b===p)return b===n?void this.timeDelay():void(this._centerShip===c&&b===p||this._centerShip===d&&b===o||(b===p?++this._centerShip:--this._centerShip,this._prepareMove(),this._move()))}}_prepareMove(){this._gun=this._centerShip+7,this.nextPositionShip.push(this.dataField[this._gun]),this.nextPositionShip.push(this.dataField[this._centerShip]),this._centerShip!==d&&this.nextPositionShip.push(this.dataField[this._centerShip-1]),this._centerShip!==c&&this.nextPositionShip.push(this.dataField[this._centerShip+1])}_move(){this.currentPositionShip.forEach(a=>{a.el.style.fill="#eee",a.isShip=!1}),this.nextPositionShip.forEach(a=>{a.el.style.fill="#00f",a.isShip=!0}),this.currentPositionShip=this.nextPositionShip,this.nextPositionShip=[]}_shot(){let b=this.dataField[this._gun+7];b.el.style.fill="#f00",b.isBullet=!0,b.time=performance.now(),a.trigger("play sound",{type:"blaster"})}moveBullet(a){a.el.style.fill="#eee",a.isBullet=!1;let b=this.dataField[a.index+7];b&&(b.isBullet=!0,b.el.style.fill="#f00",b.time=performance.now())}}class t{constructor(a){this.data=a.data,this.gun=j,this.currentIndex=0,this.timerFire=null}initStarOfDeath(){this.data[j].isStar=!0,this.data[j].el.style.fill="#000",this.data[359].isAim=!0,this.data[359].el.style.fill="#f00",this.gun=j,this.timerFire=setInterval(()=>{this._fire()},2e3)}moveStar(b){let c=b.index-7;b.isStar=!1,b.isStarBody=!1;let d=this.data[c];d?(this.gun=c,d.isStar=!0,d.el.style.fill="#000",d.isStarBody=!0,d.time=performance.now(),g.forEach(a=>{let b=this.data[c+a];b&&(b.el.style.fill="#000",b.isStarBody=!0)}),h.forEach(a=>{let b=this.data[c+a];b&&(b.el.style.fill="#eee",b.isStarBody=!1)})):a.trigger("stop game",{type:"lose"})}_fire(){let a=this.data[this.gun-7];a&&(a.isBulletStar=!0,a.el.style.fill="#eecb0f")}moveBulletStart(a){a.el.style.fill="#eee",a.isBulletStar=!1;let b=this.data[a.index-7];b&&(b.isBulletStar=!0,b.el.style.fill="#eecb0f",b.time=performance.now())}moveAim(a){a.isAim=!1,a.isStarBody&&(a.el.style.fill="#000"),this.currentIndex+=1,this.currentIndex===i.length&&(this.currentIndex=0);let b=this.data[this.gun+i[this.currentIndex]];b.isAim=!0,b.time=performance.now(),b.el.style.fill="#f00"}}class u{constructor(b){this.dataField=b.dataField,this.timerIdGeneratorEvilShip=null,this.starOfDie=null,this.evilTopStartPoint=l,this.evilBottomStartPoint=m,this.starOfDie=new t({data:this.dataField}),a.on("start game",()=>this.initEvil()),a.on("last fight",()=>this.starOfDie.initStarOfDeath()),a.on("stop game",()=>clearInterval(this.starOfDie.timerFire))}initEvil(){clearInterval(this.timerIdGeneratorEvilShip),this.evilTopStartPoint=l,this.evilBottomStartPoint=m,this._generateEvilShip()}_generateEvilShip(){this.timerIdGeneratorEvilShip=setInterval(()=>{let a=this.generateStartPosition();this.dataField[a].el.style.fill="#0f0",this.dataField[a].isEnemy=!0,this.dataField[a].time=performance.now()},1e3)}moveShipEvil(a,b){let c=this.dataField[a.index-7],d=this.dataField[a.index+7];d&&(d.isEnemy=!1,d.el.style.fill="#eee"),c?(c.isEnemy=!0,c.el.style.fill="#0f0",c.time=performance.now()):setTimeout(()=>a.el.style.fill="#eee",b),a.isEnemy=!1}destroy(b){a.trigger("play sound",{type:"bomb"}),b.isEnemy=!1,b.isBullet=!1,b.el.style.fill="#eee",this.dataField[b.index+7]&&(this.dataField[b.index+7].el.style.fill="#eee")}destroyAllEnemyShip(){this.dataField.forEach(a=>{if(a.isEnemy){a.isEnemy=!1,a.el.style.fill="#eee";let b=this.dataField[a.index+7];b&&(b.el.style.fill="#eee")}})}generateStartPosition(){let a=Math.round(Math.random()*(this.evilBottomStartPoint-this.evilTopStartPoint)+this.evilTopStartPoint);return a>=this.dataField.length?a-7:a}}class v{constructor(b){this.dataField=b.data,this.score=0,this.isStop=!1,this.enemySpeed=300,this.ship=new s({dataField:this.dataField}),this.evil=new u({dataField:this.dataField}),a.on("start game",()=>this._startProcessor({data:this.dataField,context:this})),a.on("stop game",()=>this.isStop=!0)}_startProcessor(a){let{data,context}=a;this.score=0,this.isStop=!1,this.enemySpeed=300,requestAnimationFrame(function a(){data.forEach(context.checkState.bind(context)),context.isStop||requestAnimationFrame(a)})}checkState(a){switch(!0){case a.isEnemy:this._isEnemyShip(a);break;case a.isBullet:this._isBullet(a);break;case a.isShip:this._isShip(a);break;case a.isBulletStar:this._isBulletStar(a);break;case a.isStar:this._isStar(a);break;case a.isAim:this._isAim(a)}}_isEnemyShip(b){b.isShip?(clearInterval(this.evil.timerIdGeneratorEvilShip),a.trigger("stop game",{type:"lose"})):b.isBullet?(this.evil.destroy(b),this.score+=10,a.trigger("update score",{data:this.score}),this.score%100===0&&(this.enemySpeed*=y.changeDifficulty(this.score),this._checkScore(this.score))):v.animate({duration:this.enemySpeed,draw:this.evil.moveShipEvil.bind(this.evil),rect:b})}_isBullet(b){b.isBulletStar?(b.el.style.fill="#eee",b.isBulletStar=!1,b.isBullet=!1):b.isAim?a.trigger("stop game",{type:"_win"}):b.isStarBody?(b.el.style.fill="#000",b.isBullet=!1):v.animate({duration:60,draw:this.ship.moveBullet.bind(this.ship),rect:b})}_isShip(b){(b.isStarBody||b.isBulletStar)&&a.trigger("stop game",{type:"lose"})}_isBulletStar(a){v.animate({duration:70,draw:this.evil.starOfDie.moveBulletStart.bind(this.evil.starOfDie),rect:a})}_isStar(a){v.animate({duration:500,draw:this.evil.starOfDie.moveStar.bind(this.evil.starOfDie),rect:a})}_isAim(a){v.animate({duration:800,draw:this.evil.starOfDie.moveAim.bind(this.evil.starOfDie),rect:a})}_checkScore(b){switch(b){case 200:a.trigger("change level",{data:1});break;case 400:a.trigger("change level",{data:2});break;case 600:a.trigger("change level",{data:3}),clearInterval(this.evil.timerIdGeneratorEvilShip),this.evil.destroyAllEnemyShip(),a.trigger("last fight")}}static animate(a){let b=a.rect.time,c=performance.now(),d=(c-b)/a.duration;d>=1&&a.draw(a.rect,a.duration)}}class w{constructor(b){this.dataField=b.data,a.on("stop game",a=>{"lose"===a.type?setTimeout(()=>{this._gameOver()},1e3):this._win()})}_gameOver(){for(let a=0;a<this.dataField.length;a++)this.dataField[a].el.style.fill="#eee";let a=0,b=q.sort(()=>{return Math.random()-.5}),c=setInterval(()=>{this.dataField[b[a]].el.style.fill="green",a++,a>=b.length&&clearInterval(c)},10)}_win(){for(let a=0;a<this.dataField.length;a++)this.dataField[a].el.style.fill="#eee";let a=0,b=r.sort(()=>{return Math.random()-.5}),c=setInterval(()=>{this.dataField[b[a]].el.style.fill="green",a++,a>=b.length&&clearInterval(c)},10)}}class x{constructor(b){this.arrayOfSounds=b,this._init(),a.on("play sound",a=>this.play(a)),a.on("stop game",a=>{this.stop({type:"main"}),"lose"===a.type?this.play({type:"gameover"}):this.play({type:"win"})})}_init(){this.arrayOfSounds.forEach(a=>{this[a.name]=new Audio(k+a.url),this[a.name].loop=a.loop,this[a.name].volume=a.volume})}play(a){this[a.type].pause(),this[a.type].currentTime=0,this[a.type].paused&&this[a.type].play()}stop(a){this[a.type].pause(),this[a.type].currentTime=0}}class y{constructor(b){this._$el=b.el,this._$rectList=this._$el.querySelectorAll("rect"),this.dataField=y.initData(this._$rectList),this.image=document.querySelector(".avatar.width-full.rounded-2"),a.on("start game",()=>this.startGame()),a.on("change level",a=>this.setImageOnPageLevel(a)),a.on("update score",y.updateScoreOnPage),new v({data:this.dataField}),new w({data:this.dataField}),new x([{name:"main",url:"main.mp3",loop:!0,volume:.5},{name:"blaster",url:"laser.mp3",loop:!1,volume:1},{name:"bomb",url:"bomb.mp3",loop:!1,volume:1},{name:"gameover",url:"gameover.mp3",loop:!1,volume:1},{name:"win",url:"win.mp3",loop:!1,volume:1}])}startGame(){this._clearData(),this.setImageOnPageLevel({data:1}),y.updateScoreOnPage({data:0}),a.trigger("play sound",{type:"main"})}_clearData(){this.dataField.forEach(a=>{a.isShip=!1,a.isBullet=!1,a.isEnemy=!1,a.isStar=!1,a.isStarBody=!1,a.isBulletStar=!1,a.isAim=!1,a.el.style.fill="#eee"})}static initData(a){let b=[];for(let c=0;c<a.length;c++)b.push({el:a[c],index:c,time:0});return b}setImageOnPageLevel(a){let b=a.data;1===b?this.image.src=k+"level1.jpg":2===b?this.image.src=k+"level2.jpg":this.image.src=k+"level3.jpg"}static changeDifficulty(a){return 1-Math.floor(a/100)/10}static updateScoreOnPage(a){let b=a.data,c=document.querySelector(".score-game");c.innerHTML=`Score: ${b}`}}class z{constructor(a){let b=a.svg;z.initToolbar(b),new y({el:b}),this.$startBtn=document.getElementById("btn_game_start"),this.$startBtnAgain=document.getElementById("btn_game_start_again"),this.$startBtn.addEventListener("click",()=>this.startGame()),this.$startBtnAgain.addEventListener("click",()=>this.startGame())}static initToolbar(a){let b=document.createElement("div");b.innerHTML=`<button style="display: block; background: #4078c0; border-radius: 2px; padding: 5px 20px; color: #fff; border: 0;" id="btn_game_start">Start</button>
\t\t\t<div style="position: relative; height: 40px; display: none; background: #fff;">
\t\t\t<button style="float: left; background: #4078c0; border-radius: 2px; margin-left: 10px; padding: 5px 20px; color: #fff; border: 0;" id="btn_game_start_again">Try again</button>
\t\t\t<h2 style="text-align: left; margin-left: 100px; float: left" class="score-game">Score: 0</h2>
\t\t\t\t<div  style="float: left; background: #eee; line-height: 40px; margin-left: 150px; padding: 0 20px;">
\t\t\t\t\t<strong style="color: #ff7978">W-</strong>Fire  
\t\t\t\t\t<strong style="color: #ff7978">A-</strong>Up  
\t\t\t\t\t<strong style="color: #ff7978">D-</strong>Down  
\t\t\t\t</div>
\t\t\t</div>`,b.style.cssText=`
\t\t    position: absolute;
\t\t    top: -50px;
\t\t    width: 100%;
\t\t    background: #fff;
        `,a.parentNode.style.position="relative",a.parentNode.appendChild(b)}startGame(){this.$startBtn.style.display="none",this.$startBtn.nextElementSibling.style.display="block",a.trigger("start game")}}new z({svg:document.querySelector(".js-calendar-graph-svg")});'>Andrew</a>
	
	
	
	<div id="container">
		<div id="start-container">
			<div class="title">Для сортировки введите числа разделяя их запятой.</div>
			<form class="form">
			<input type="text" name="form" id="sort" class="input" placeholder="например: 1,3,10,884,3,4"/>
			<button type="button" class="btn btn-sort" onclick ="getArr()">Сортировать</button>
			</form>
			<div class="text">
				Работа пузырьковой сортировки реализуется с помощью двух циклов. Первый цикл отвечает за количество проходов по массиву, исходя из количества элементов массива. Второй цикл отвечает, собственно за саму сортировку. Проходя по массиву и выталкивая самое большое число в конец массива. При каждом следующей итерации первого цикла. Количество итераций второго сокращается на количество уже отсортированных чисел(тех что уже протолкнуты в конец массива).
			</div>
		</div>
		<div class="hide" id="end-container">
			<div id = "res"></div>
			<div class="btn-group">
				<button class="btn" onclick="reset()">Сброс</button>
				<button class="btn" id="btn">Вперед</button>
			</div>
		</div>
	</div>
<script type="text/javascript" src="main.js"></script>
		
</body>
</html>
